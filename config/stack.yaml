# =============================================================================
# STACK CONFIGURATION
# =============================================================================
# Centralized tech stack versions and configuration.
# All agents and skills reference this file instead of hardcoding versions.
#
# HOW TO USE:
# 1. Copy this file to ~/.claude/config/stack.yaml
# 2. Set your active stacks in the 'active' section below
# 3. Agents will automatically adapt to your selected stack
# =============================================================================

# -----------------------------------------------------------------------------
# ACTIVE STACK SELECTION
# -----------------------------------------------------------------------------
# Set your project's active stack here. Agents will adapt accordingly.
active:
  language: "typescript"        # typescript | python | go | java | kotlin | rust | cpp | c
  frontend: "react"             # react | vue | svelte | angular | none
  frontend_framework: "nextjs"  # nextjs | vite | nuxt | sveltekit | none
  backend: "node"               # node | python | go | java | kotlin | rust | cpp | c
  database: "postgresql"        # postgresql | mysql | mongodb | sqlite
  
# -----------------------------------------------------------------------------
# LANGUAGE STACKS
# -----------------------------------------------------------------------------
languages:
  typescript:
    version: "5.x"
    runtime: "Node.js 22.x"
    package_manager: ["npm", "pnpm", "yarn", "bun"]
    linter: "eslint"
    formatter: "prettier"
    test_runner: ["vitest", "jest"]
    build_check: "tsc --noEmit"
    
  python:
    version: "3.12"
    package_manager: ["uv", "pip", "poetry", "pdm"]
    linter: "ruff"
    formatter: "ruff format"
    type_checker: "pyright"
    test_runner: ["pytest"]
    build_check: "pyright"
    
  go:
    version: "1.22"
    package_manager: "go mod"
    linter: "golangci-lint"
    formatter: "gofmt"
    test_runner: "go test"
    build_check: "go build"
    
  java:
    version: "21"
    build_tool: ["gradle", "maven"]
    linter: "checkstyle"
    test_runner: ["junit5"]
    build_check: "gradle build"
    
  kotlin:
    version: "2.0"
    build_tool: ["gradle"]
    linter: "ktlint"
    test_runner: ["junit5", "kotest"]
    build_check: "gradle build"
    
  rust:
    version: "1.75"
    package_manager: "cargo"
    linter: "clippy"
    formatter: "rustfmt"
    test_runner: "cargo test"
    build_check: "cargo build"
    
  cpp:
    version: "C++20"
    build_tool: ["cmake", "make", "bazel"]
    linter: "clang-tidy"
    formatter: "clang-format"
    test_runner: ["gtest", "catch2"]
    build_check: "cmake --build ."
    
  c:
    version: "C17"
    build_tool: ["cmake", "make"]
    linter: "clang-tidy"
    formatter: "clang-format"
    test_runner: ["check", "unity"]
    build_check: "make"

# -----------------------------------------------------------------------------
# FRONTEND FRAMEWORKS
# -----------------------------------------------------------------------------
frontend:
  react:
    version: "19"
    meta_frameworks: ["nextjs", "vite", "remix"]
    state_management: ["zustand", "jotai", "tanstack-query"]
    styling: ["tailwind", "css-modules", "styled-components"]
    testing: ["vitest", "react-testing-library", "playwright"]
    
  vue:
    version: "3"
    meta_frameworks: ["nuxt", "vite"]
    state_management: ["pinia"]
    styling: ["tailwind", "unocss", "css-modules"]
    testing: ["vitest", "vue-test-utils", "playwright"]
    
  svelte:
    version: "5"
    meta_frameworks: ["sveltekit", "vite"]
    state_management: ["svelte/store", "nanostores"]
    styling: ["tailwind", "unocss"]
    testing: ["vitest", "playwright"]
    
  angular:
    version: "18"
    state_management: ["ngrx", "signals"]
    styling: ["tailwind", "scss"]
    testing: ["jasmine", "karma", "playwright"]

# -----------------------------------------------------------------------------
# BACKEND FRAMEWORKS
# -----------------------------------------------------------------------------
backend:
  node:
    frameworks: ["nextjs-api", "express", "fastify", "hono", "nest"]
    validation: "zod"
    orm: ["prisma", "drizzle", "typeorm"]
    
  python:
    frameworks: ["fastapi", "django", "flask", "litestar"]
    validation: "pydantic"
    orm: ["sqlalchemy", "tortoise", "django-orm"]
    
  go:
    frameworks: ["gin", "echo", "fiber", "chi"]
    validation: "validator"
    orm: ["gorm", "sqlc", "ent"]
    
  java:
    frameworks: ["spring-boot", "quarkus", "micronaut"]
    validation: "jakarta-validation"
    orm: ["jpa", "hibernate", "jooq"]
    
  kotlin:
    frameworks: ["ktor", "spring-boot"]
    validation: "konform"
    orm: ["exposed", "ktorm", "jpa"]
    
  rust:
    frameworks: ["axum", "actix-web", "rocket"]
    validation: "validator"
    orm: ["diesel", "sea-orm", "sqlx"]

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------
database:
  postgresql:
    providers: ["supabase", "neon", "railway", "self-hosted"]
    features: ["RLS", "full-text-search", "jsonb"]
    
  mysql:
    providers: ["planetscale", "railway", "self-hosted"]
    
  mongodb:
    providers: ["atlas", "self-hosted"]
    
  sqlite:
    providers: ["turso", "local"]

# -----------------------------------------------------------------------------
# AI/ML MODELS
# -----------------------------------------------------------------------------
ai:
  providers:
    claude:
      models: ["claude-sonnet-4-20250514", "claude-opus-4-20250514"]
      use_cases: ["coding", "analysis", "orchestration"]
    openai:
      models: ["gpt-4o", "gpt-4o-mini", "o3-mini", "o3"]
      use_cases: ["reasoning", "code-review", "web-search"]
    gemini:
      models: ["gemini-2.5-pro", "gemini-2.5-flash"]
      use_cases: ["frontend", "large-context", "ui-design"]
  embeddings:
    model: "text-embedding-3-small"
    dimensions: 1536

# -----------------------------------------------------------------------------
# MCP SERVERS
# -----------------------------------------------------------------------------
# These MCP servers enable multi-model orchestration.
# Configure in ~/.claude.json (global) or .claude.json (project)
mcp:
  gemini:
    package: "@anthropics/claude-code-mcp-server-gemini"
    fallback_package: "@anthropic/claude-code-mcp-server-gemini"
    community_package: "@anthropic/mcp-server-gemini"
    env_var: "GEMINI_API_KEY"
    description: "Gemini API for planning, frontend, architecture"
  openai:
    package: "@anthropic/claude-code-mcp-server-openai"
    fallback_package: "@openai/mcp-server"
    community_package: "@mzxrai/mcp-openai"
    env_var: "OPENAI_API_KEY"
    description: "OpenAI API for o3, o3-mini, GPT-4o"

# -----------------------------------------------------------------------------
# AGENT MODEL ASSIGNMENTS
# -----------------------------------------------------------------------------
agent_models:
  # Planning & Architecture (large context)
  planner: "gemini"
  architect: "gemini"
  database-architect: "gemini"
  # Frontend (visual/UI focused)
  frontend-engineer: "gemini"
  ui-designer: "gemini"
  accessibility-expert: "gemini"
  publisher: "gemini"
  # Backend & Logic (code quality)
  backend-engineer: "claude"
  test-engineer: "claude"
  devops-engineer: "claude"
  api-designer: "claude"
  # Review & Analysis (reasoning)
  code-reviewer: "openai-o3-mini"
  security-reviewer: "openai-o3-mini"
  performance-optimizer: "openai-o3"
  # Error Resolution
  error-resolver: "claude"
  # Research (web search)
  researcher: "openai-gpt4o"

# -----------------------------------------------------------------------------
# CODING STANDARDS
# -----------------------------------------------------------------------------
standards:
  file_size:
    typical: 200-400
    max: 800
  function_size:
    max_lines: 50
  nesting:
    max_depth: 4
  test_coverage:
    min_percent: 80
  commit_format: "conventional"
  forbidden:
    - "console.log in production"
    - "any type without justification"
    - "hardcoded secrets"
    - "mutation patterns"
